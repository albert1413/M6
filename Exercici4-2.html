<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestió de Factures</title>

  <!-- Estilos para DataTables y el formulario -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>

  <!-- Incluir el archivo de JavaScript -->
  <script src="Exercici4-2.js" defer></script>
  <script src="Exercici4-2.css"></script>

  <style>
    .hidden {
        display: none;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 10px;
        border: 1px solid #ddd;
    }
    #totalSection {
        text-align: right;
        margin-top: 20px;
    }
  </style>
</head>

<body>
    <h1>Gestió de Factures</h1>

    <!-- Tabla para mostrar facturas -->
    <div id="facturesTable">
        <table border="10" id="table2" class="display">
            <thead>
                <tr>
                    <th>Estat</th>
                    <th>ID</th>
                    <th>Data</th>
                    <th>Due Data</th>
                    <th>Client</th>
                    <th>Forma Pagat</th>
                    <th>Total ha pagar (€)</th>
                    <th>Accions</th>
                </tr>
            </thead>
            <tbody id="facturesBody"></tbody>
        </table>
        <button onclick="mostrarFormFactura()">Nou Client</button>
    </div>

    <!-- Formulario para crear/editar facturas -->
    <div id="formFactura" class="hidden">
        <h1>Factura</h1>

        <div id="factura-info"></div>
        <p>
            <label for="clientNom">Nom del Client:</label>
            <input type="text" id="clientNom" placeholder="Nom del client">
        </p>
        <p>
            <label for="adreca">Adreça:</label>
            <input type="text" id="adreca" placeholder="Adreça del client">
        </p>
        <p>
            <label for="ciutat">Ciutat:</label>
            <input type="text" id="ciutat" placeholder="Ciutat">
        </p>
        <p>
            <label for="facturaNo">Número de Factura:</label>
            <input type="text" id="facturaNo" placeholder="Número de factura">
        </p>
        <p>
            <label for="dataFactura">Data de la Factura:</label>
            <input type="date" id="dataFactura">
        </p>
        <p>
            <label for="dueData">Due Data:</label>
            <input type="date" id="dueData">
        </p>
        <p>
            <label for="formaPagat">Forma Pagat:</label>
            <select id="formaPagat">
                <option value="" disabled selected>Selecciona una forma de pagament</option>
                <option value="cash">Cash</option>
                <option value="targeta">Targeta</option>
            </select>
        </p>    

        <h3>Productes</h3>
        <table border="10" id="table" class="display">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Producte</th>
                    <th>Quantitat</th>
                    <th>Preu</th>
                    <th>Subtotal</th>
                    <th><button class="btn-afegir" onclick="afegirLinia()">+</button></th>
                </tr>
            </thead>
            <tbody id="productesBody">
                <tr id="product-0">
                    <td>1</td>
                    <td><input type="text" placeholder="Objecte"></td>
                    <td><input type="number" value="1" oninput="calcularTotal()"></td>
                    <td><input type="number" value="0" step="0.01" oninput="calcularTotal()"></td>
                    <td>0.00</td>
                    <td><button class="btn-eliminar" onclick="eliminarLinia(0)">X</button></td>
                </tr>
            </tbody>
        </table>

        <div id="controls">
            <br>
            <button onclick="guardarFactura()">Guardar Factura</button>
            <button onclick="">Cancel·lar Factura</button> 

            <div id="Calculs" style="text-align: right;">
                <p>
                    <label for="descompte">Descompte (%):</label>
                    <input type="number" id="descompte" value="0" oninput="calcularTotal()"> %
                </p>
                <h2>Total: <span id="totalFactura">0.00 </span> €</h2>
            </div>
        </div>
    </div>
